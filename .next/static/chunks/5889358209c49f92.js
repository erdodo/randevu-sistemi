(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70262,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(66608),l=e.i(75157),r=e.i(73375),i=e.i(63059),n=e.i(75254);let d=(0,n.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),c=(0,n.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),o=(0,n.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),x=(0,n.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var m=e.i(37727),h=e.i(31278),u=e.i(43432),p=e.i(3116);let g=(0,n.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),y=(0,n.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),b=(0,n.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var j=e.i(89853);let f=(0,n.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),v=(0,n.default)("webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]),N=(0,n.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),w=(0,n.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),k=(0,n.default)("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),C=(0,n.default)("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),S=(0,n.default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),$=(0,n.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var M=e.i(70756);let A=(0,n.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function z({business:e,template:s,onClose:l,onSave:r}){let[i,n]=(0,a.useState)(e.name),[d,c]=(0,a.useState)(e.description??""),[o,x]=(0,a.useState)(e.address??""),[u,g]=(0,a.useState)(e.phone??""),[y,b]=(0,a.useState)(e.logo??""),[j,f]=(0,a.useState)(e.primaryColor),[v,k]=(0,a.useState)(e.openTime),[C,z]=(0,a.useState)(e.closeTime),[E,L]=(0,a.useState)(e.slotDuration),[O,H]=(0,a.useState)(e.workingDays.split(",").map(Number)),[D,R]=(0,a.useState)(""),[K,_]=(0,a.useState)(e.services.map(e=>({name:e.name,duration:e.duration,price:e.price?String(e.price):""}))),[B,F]=(0,a.useState)("brand"),[I,U]=(0,a.useState)(!1),[Y,V]=(0,a.useState)(""),[q,J]=(0,a.useState)(!1),[G,W]=(0,a.useState)(!1),[X,Q]=(0,a.useState)(""),[Z,ee]=(0,a.useState)(!1),[et,ea]=(0,a.useState)(""),es=async()=>{U(!0),V("");try{let t=await fetch(`/api/businesses/${e.slug}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminPassword:e.adminPassword,name:i,description:d,address:o,phone:u,logo:y||null,primaryColor:j,openTime:v,closeTime:C,slotDuration:E,workingDays:O.join(","),newPassword:D||void 0,services:K.filter(e=>e.name.trim()).map(e=>({name:e.name.trim(),duration:e.duration,price:e.price?parseFloat(e.price):null}))})});if(!t.ok){let e=await t.json();throw Error(e.error??"KayÄ±t baÅŸarÄ±sÄ±z")}let a=await t.json();r(a),l()}catch(e){V(e instanceof Error?e.message:"Hata oluÅŸtu")}finally{U(!1)}},el=async()=>{if(!X)return void ea("Åžifre gerekli");ee(!0),ea("");try{let e=await fetch("/api/setup/reset",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:X})}),t=await e.json();if(!e.ok)throw Error(t.error??"Åžirket silinemedi");sessionStorage.removeItem("admin_auth"),window.location.href="/"}catch(e){ea(e instanceof Error?e.message:"Hata oluÅŸtu"),ee(!1)}},er=[{id:"brand",label:"Marka",icon:(0,t.jsx)(S,{className:"w-4 h-4"})},{id:"hours",label:"Saatler",icon:(0,t.jsx)(p.Clock,{className:"w-4 h-4"})},{id:"services",label:"Hizmetler",icon:(0,t.jsx)($,{className:"w-4 h-4"})},{id:"security",label:"GÃ¼venlik",icon:(0,t.jsx)(M.Lock,{className:"w-4 h-4"})}];return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center px-4 pb-4 sm:pb-0",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:l}),(0,t.jsxs)("div",{className:"relative bg-white rounded-3xl w-full max-w-lg shadow-2xl max-h-[90vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 pt-6 pb-4 border-b border-gray-100 flex-shrink-0",children:[(0,t.jsx)("h2",{className:"font-bold text-gray-900 text-xl",children:"Ä°ÅŸletme AyarlarÄ±"}),(0,t.jsx)("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all",children:(0,t.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"flex gap-1 px-6 py-3 border-b border-gray-100 flex-shrink-0 overflow-x-auto",children:er.map(a=>(0,t.jsxs)("button",{onClick:()=>F(a.id),className:`flex items-center gap-1.5 px-3 py-2 rounded-xl text-sm font-medium transition-all flex-shrink-0 ${B===a.id?"text-white":"text-gray-500 hover:bg-gray-100"}`,style:B===a.id?{backgroundColor:e.primaryColor}:{},children:[a.icon," ",a.label]},a.id))}),(0,t.jsxs)("div",{className:"overflow-y-auto flex-1 px-6 py-4",children:["brand"===B&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(P,{label:"Ä°ÅŸletme AdÄ±",children:(0,t.jsx)("input",{value:i,onChange:e=>n(e.target.value),className:T,placeholder:"Ä°ÅŸletme adÄ±"})}),(0,t.jsx)(P,{label:"AÃ§Ä±klama",children:(0,t.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),className:`${T} resize-none`,rows:2,placeholder:"KÄ±sa tanÄ±tÄ±m"})}),(0,t.jsx)(P,{label:"Adres",children:(0,t.jsx)("input",{value:o,onChange:e=>x(e.target.value),className:T,placeholder:"Ä°ÅŸletme adresi"})}),(0,t.jsx)(P,{label:"Telefon",children:(0,t.jsx)("input",{value:u,onChange:e=>g(e.target.value),className:T,placeholder:"0xxx xxx xx xx",type:"tel"})}),(0,t.jsx)(P,{label:"Logo URL",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:y,onChange:e=>b(e.target.value),className:`${T} flex-1`,placeholder:"https://... veya boÅŸ bÄ±rakÄ±n"}),y&&(0,t.jsx)("img",{src:y,alt:"",className:"w-10 h-10 rounded-xl object-cover border border-gray-200",onError:()=>b("")})]})}),(0,t.jsx)(P,{label:"Ana Renk",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"color",value:j,onChange:e=>f(e.target.value),className:"w-12 h-10 rounded-xl cursor-pointer border-none p-0.5"}),(0,t.jsx)("input",{value:j,onChange:e=>f(e.target.value),className:`${T} flex-1 font-mono uppercase`,placeholder:"#6366f1",maxLength:7}),(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl shadow-sm",style:{backgroundColor:j}})]})})]}),"hours"===B&&(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsx)(P,{label:"Ã‡alÄ±ÅŸma GÃ¼nleri",children:(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:["Paz","Pzt","Sal","Ã‡ar","Per","Cum","Cmt"].map((a,s)=>(0,t.jsx)("button",{onClick:()=>{H(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s].sort())},className:`w-10 h-10 rounded-xl text-sm font-medium transition-all ${O.includes(s)?"text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,style:O.includes(s)?{backgroundColor:e.primaryColor}:{},children:a},s))})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(P,{label:"AÃ§Ä±lÄ±ÅŸ",children:(0,t.jsx)("input",{type:"time",value:v,onChange:e=>k(e.target.value),className:T})}),(0,t.jsx)(P,{label:"KapanÄ±ÅŸ",children:(0,t.jsx)("input",{type:"time",value:C,onChange:e=>z(e.target.value),className:T})})]}),(0,t.jsx)(P,{label:"Randevu SÃ¼resi (dk)",children:(0,t.jsx)("select",{value:E,onChange:e=>L(Number(e.target.value)),className:T,children:[15,20,30,45,50,60,90,120].map(e=>(0,t.jsxs)("option",{value:e,children:[e," dakika"]},e))})})]}),"services"===B&&(0,t.jsxs)("div",{className:"space-y-3",children:[K.map((e,a)=>(0,t.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("input",{value:e.name,onChange:e=>_(t=>t.map((t,s)=>s===a?{...t,name:e.target.value}:t)),className:`${T} text-sm`,placeholder:"Hizmet adÄ±"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"number",value:e.duration,onChange:e=>_(t=>t.map((t,s)=>s===a?{...t,duration:Number(e.target.value)}:t)),className:`${T} text-sm w-20`,placeholder:"SÃ¼re (dk)",min:5}),(0,t.jsx)("input",{type:"number",value:e.price,onChange:e=>_(t=>t.map((t,s)=>s===a?{...t,price:e.target.value}:t)),className:`${T} text-sm flex-1`,placeholder:"Fiyat (â‚º, opsiyonel)",min:0})]})]}),(0,t.jsx)("button",{onClick:()=>_(e=>e.filter((e,t)=>t!==a)),className:"p-2.5 text-red-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all mt-0.5",children:(0,t.jsx)(w,{className:"w-4 h-4"})})]},a)),(0,t.jsxs)("button",{onClick:()=>_(e=>[...e,{name:"",duration:30,price:""}]),className:"w-full py-3 rounded-xl border-2 border-dashed border-gray-200 text-gray-500 hover:border-gray-300 hover:text-gray-700 flex items-center justify-center gap-2 text-sm font-medium transition-all",children:[(0,t.jsx)(N,{className:"w-4 h-4"})," Hizmet Ekle"]})]}),"security"===B&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(P,{label:"Yeni Åžifre",children:(0,t.jsx)("input",{type:"password",value:D,onChange:e=>R(e.target.value),className:T,placeholder:"BoÅŸ bÄ±rakÄ±rsanÄ±z deÄŸiÅŸmez"})}),(0,t.jsx)("div",{className:"bg-amber-50 rounded-xl p-3",children:(0,t.jsx)("p",{className:"text-amber-700 text-sm",children:"Åžifreyi deÄŸiÅŸtirmek iÃ§in yeni ÅŸifreyi girin ve kaydedin."})})]})]}),Y&&(0,t.jsx)("p",{className:"px-6 text-red-500 text-sm",children:Y}),(0,t.jsx)("div",{className:"px-6 pb-6 pt-4 border-t border-gray-100 flex-shrink-0",children:(0,t.jsx)("button",{onClick:es,disabled:I,className:"w-full py-3.5 rounded-xl font-semibold text-white flex items-center justify-center gap-2 transition-all active:scale-95 shadow-lg disabled:opacity-70",style:{backgroundColor:e.primaryColor},children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Loader2,{className:"w-5 h-5 animate-spin"})," Kaydediliyor..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A,{className:"w-5 h-5"})," Kaydet"]})})}),(0,t.jsx)("button",{onClick:()=>{ea(""),Q(""),W(!1),J(!0)},className:"absolute bottom-2 right-2 px-1.5 py-1 rounded-md text-[10px] font-semibold text-red-600 border border-red-300 bg-red-50 hover:bg-red-100 leading-none",title:"Tehlikeli iÅŸlem",children:"Åžirketi Sil"})]}),q&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/45",onClick:()=>J(!1)}),(0,t.jsxs)("div",{className:"relative w-full max-w-sm rounded-2xl bg-white p-5 shadow-2xl border border-red-100",children:[(0,t.jsx)("p",{className:"font-bold text-gray-900",children:"Emin misin?"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Bu iÅŸlem tÃ¼m veritabanÄ± verilerini geri alÄ±namaz ÅŸekilde siler."}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>J(!1),className:"flex-1 py-2.5 rounded-xl bg-gray-100 text-gray-700 text-sm font-medium",children:"VazgeÃ§"}),(0,t.jsx)("button",{onClick:()=>{J(!1),W(!0)},className:"flex-1 py-2.5 rounded-xl bg-red-600 text-white text-sm font-semibold",children:"Eminim"})]})]})]}),G&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/45",onClick:()=>{Z||W(!1)}}),(0,t.jsxs)("div",{className:"relative w-full max-w-sm rounded-2xl bg-white p-5 shadow-2xl border border-red-100",children:[(0,t.jsx)("p",{className:"font-bold text-gray-900",children:"Åžifre OnayÄ±"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Silme iÅŸlemi iÃ§in yÃ¶netici ÅŸifresini girin."}),(0,t.jsx)("input",{type:"password",value:X,onChange:e=>Q(e.target.value),className:`${T} mt-3`,placeholder:"YÃ¶netici ÅŸifresi",onKeyDown:e=>{"Enter"!==e.key||Z||el()},autoFocus:!0}),et&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-2",children:et}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>W(!1),disabled:Z,className:"flex-1 py-2.5 rounded-xl bg-gray-100 text-gray-700 text-sm font-medium disabled:opacity-50",children:"Ä°ptal"}),(0,t.jsxs)("button",{onClick:el,disabled:Z,className:"flex-1 py-2.5 rounded-xl bg-red-600 text-white text-sm font-semibold disabled:opacity-70 flex items-center justify-center gap-1.5",children:[Z?(0,t.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}):null,"Verileri Sil"]})]})]})]})]})}let T="w-full px-3.5 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-0 text-gray-900 bg-gray-50 text-sm transition-all";function P({label:e,children:a}){return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:e}),a]})}let E=["Ocak","Åžubat","Mart","Nisan","MayÄ±s","Haziran","Temmuz","AÄŸustos","EylÃ¼l","Ekim","KasÄ±m","AralÄ±k"],L=["Pzt","Sal","Ã‡ar","Per","Cum","Cmt","Paz"],O="admin_auth";function H({business:e,template:n}){let[x,m]=(0,a.useState)(!1),[p,y]=(0,a.useState)(""),[S,$]=(0,a.useState)(""),[M,A]=(0,a.useState)(e),[T,P]=(0,a.useState)("calendar"),H=new Date,_=(0,l.getTodayString)(),[B,F]=(0,a.useState)(H.getMonth()),[I,U]=(0,a.useState)(H.getFullYear()),[Y,V]=(0,a.useState)([]),[q,J]=(0,a.useState)(_),[G,W]=(0,a.useState)(!1),[X,Q]=(0,a.useState)(null),[Z,ee]=(0,a.useState)([]),[et,ea]=(0,a.useState)(0),[es,el]=(0,a.useState)(!1),[er,ei]=(0,a.useState)(!1),[en,ed]=(0,a.useState)([]),[ec,eo]=(0,a.useState)(!1),[ex,em]=(0,a.useState)([]),[eh,eu]=(0,a.useState)(!1),[ep,eg]=(0,a.useState)(""),[ey,eb]=(0,a.useState)("appointment_created"),[ej,ef]=(0,a.useState)(""),[ev,eN]=(0,a.useState)(!1),ew=(0,a.useRef)(null),ek=M.primaryColor;M.workingDays.split(",").map(Number),(0,a.useEffect)(()=>{"true"===sessionStorage.getItem(O)&&m(!0)},[]);let eC=(0,a.useCallback)(async(t,a)=>{W(!0);try{let s=`${t}-${String(a+1).padStart(2,"0")}`,l=await fetch(`/api/appointments?slug=${e.slug}&month=${s}`),r=await l.json();V(Array.isArray(r)?r:[])}catch{}finally{W(!1)}},[e.slug]),eS=(0,a.useCallback)(async()=>{try{let t=await fetch(`/api/notifications?slug=${e.slug}`),a=await t.json();ee(a.notifications??[]),ea(a.unreadCount??0)}catch{}},[e.slug]),e$=(0,a.useCallback)(async()=>{eo(!0);try{let e=await fetch("/api/customers"),t=await e.json();ed(Array.isArray(t)?t:[])}catch{}finally{eo(!1)}},[]);(0,a.useEffect)(()=>{if(x)return eC(I,B),eS(),ew.current=setInterval(eS,3e4),()=>{ew.current&&clearInterval(ew.current)}},[x,I,B,eC,eS]);let eM=(0,a.useCallback)(async()=>{eu(!0);try{let e=await fetch("/api/webhooks"),t=await e.json();em(Array.isArray(t)?t:[])}catch{}finally{eu(!1)}},[]);(0,a.useEffect)(()=>{x&&"customers"===T&&e$(),x&&"webhooks"===T&&eM()},[x,T,e$,eM]);let eA=async()=>{if(ep.trim()){eN(!0);try{let e=await fetch("/api/webhooks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:ep.trim(),event:ey,secret:ej.trim()||void 0})});if(e.ok){let t=await e.json();em(e=>[t,...e]),eg(""),ef("")}}catch{}finally{eN(!1)}}},ez=async e=>{em(t=>t.filter(t=>t.id!==e)),await fetch(`/api/webhooks?id=${e}`,{method:"DELETE"})},eT=async(e,t)=>{em(a=>a.map(a=>a.id===e?{...a,isActive:t}:a)),await fetch("/api/webhooks",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,isActive:t})})},eP=async(e,t)=>{Q(e);try{await fetch(`/api/appointments/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})}),V(a=>a.map(a=>a.id===e?{...a,status:t}:a)),eS()}catch{}finally{Q(null)}},eE=async()=>{await fetch("/api/notifications/all",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessId:e.id})}),ea(0),ee(e=>e.map(e=>({...e,isRead:!0})))},eL=function(e,t){let a=new Date(e,t+1,0).getDate(),s=Array((new Date(e,t,1).getDay()+6)%7).fill(null);for(let e=1;e<=a;e++)s.push(e);return s}(I,B),eO={};for(let e of Y)eO[e.date]||(eO[e.date]=[]),eO[e.date].push(e);let eH=q?(eO[q]??[]).sort((e,t)=>e.time.localeCompare(t.time)):[],eD=(eO[_]??[]).length,eR=Y.filter(e=>"pending"===e.status).length;return x?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:`bg-gradient-to-r ${n.heroGradient} px-4 pt-10 pb-5 sticky top-0 z-20`,children:[(0,t.jsxs)("div",{className:"max-w-lg mx-auto flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[M.logo?(0,t.jsx)("img",{src:M.logo,alt:M.name,className:"w-10 h-10 rounded-xl object-cover shadow"}):(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center text-xl shadow",children:n.emoji}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-white font-bold text-base leading-tight",children:M.name}),(0,t.jsx)("p",{className:"text-white/60 text-xs",children:"YÃ¶netim Paneli"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>{eC(I,B),eS()},className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:(0,t.jsx)(g,{className:`w-4 h-4 ${G?"animate-spin":""}`})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>{el(!es),!es&&et>0&&eE()},className:"relative p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:[(0,t.jsx)(d,{className:"w-4 h-4"}),et>0&&(0,t.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 rounded-full bg-red-500 text-white text-[10px] font-bold flex items-center justify-center",children:et>9?"9+":et})]}),es&&(0,t.jsx)(K,{notifications:Z,onClose:()=>el(!1)})]}),(0,t.jsx)("button",{onClick:()=>ei(!0),className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:(0,t.jsx)(c,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{sessionStorage.removeItem(O),m(!1)},className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:(0,t.jsx)(o,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"max-w-lg mx-auto grid grid-cols-2 gap-2 mt-4",children:[(0,t.jsxs)("div",{className:"bg-white/15 backdrop-blur-sm rounded-2xl px-4 py-3",children:[(0,t.jsx)("p",{className:"text-white/60 text-xs font-medium",children:"BugÃ¼n"}),(0,t.jsx)("p",{className:"text-white text-2xl font-bold",children:eD}),(0,t.jsx)("p",{className:"text-white/60 text-xs",children:"randevu"})]}),(0,t.jsxs)("div",{className:"bg-white/15 backdrop-blur-sm rounded-2xl px-4 py-3",children:[(0,t.jsx)("p",{className:"text-white/60 text-xs font-medium",children:"Onay Bekleyen"}),(0,t.jsx)("p",{className:"text-white text-2xl font-bold",children:eR}),(0,t.jsx)("p",{className:"text-white/60 text-xs",children:"bu ay"})]})]}),(0,t.jsxs)("div",{className:"max-w-lg mx-auto flex gap-1 mt-4 bg-white/10 rounded-2xl p-1",children:[(0,t.jsxs)("button",{onClick:()=>P("calendar"),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-sm font-semibold transition-all ${"calendar"===T?"bg-white text-gray-900 shadow":"text-white/70 hover:text-white"}`,children:[(0,t.jsx)(j.CalendarDays,{className:"w-4 h-4"})," Takvim"]}),(0,t.jsxs)("button",{onClick:()=>P("customers"),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-sm font-semibold transition-all ${"customers"===T?"bg-white text-gray-900 shadow":"text-white/70 hover:text-white"}`,children:[(0,t.jsx)(b,{className:"w-4 h-4"})," MÃ¼ÅŸteriler"]}),(0,t.jsxs)("button",{onClick:()=>P("webhooks"),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-sm font-semibold transition-all ${"webhooks"===T?"bg-white text-gray-900 shadow":"text-white/70 hover:text-white"}`,children:[(0,t.jsx)(v,{className:"w-4 h-4"})," Webhook"]})]})]}),(0,t.jsxs)("div",{className:"max-w-lg mx-auto px-4 mt-4 pb-16",children:["calendar"===T&&(0,t.jsxs)("div",{className:"animate-in",children:[(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-md border border-gray-100 p-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-5",children:[(0,t.jsx)("button",{onClick:()=>{0===B?(F(11),U(e=>e-1)):F(e=>e-1),J(null)},className:"w-10 h-10 rounded-xl flex items-center justify-center transition-colors",style:{backgroundColor:`${ek}15`},children:(0,t.jsx)(r.ChevronLeft,{className:"w-5 h-5",style:{color:ek}})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"font-bold text-gray-900 text-lg",children:E[B]}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:I})]}),(0,t.jsx)("button",{onClick:()=>{11===B?(F(0),U(e=>e+1)):F(e=>e+1),J(null)},className:"w-10 h-10 rounded-xl flex items-center justify-center transition-colors",style:{backgroundColor:`${ek}15`},children:(0,t.jsx)(i.ChevronRight,{className:"w-5 h-5",style:{color:ek}})})]}),(0,t.jsx)("div",{className:"grid grid-cols-7 mb-2",children:L.map(e=>(0,t.jsx)("div",{className:"text-center text-xs font-semibold text-gray-400 py-1",children:e},e))}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1",children:eL.map((e,a)=>{if(!e)return(0,t.jsx)("div",{},a);let s=`${I}-${String(B+1).padStart(2,"0")}-${String(e).padStart(2,"0")}`,r=s<(0,l.getTodayString)(),i=s===_,n=s===q,d=eO[s]??[],c=d.length,o=d.some(e=>"pending"===e.status);return(0,t.jsxs)("button",{onClick:()=>J(n?null:s),className:`aspect-square rounded-xl flex flex-col items-center justify-center relative transition-all active:scale-95
                        ${n?"text-white shadow-lg scale-110":"hover:bg-gray-50"}
                        ${!n&&i?"ring-2 ring-offset-1":""}
                        ${r&&!n?"opacity-50":""}
                      `,style:n?{backgroundColor:ek}:i?{outline:`2px solid ${ek}`,outlineOffset:"2px"}:{},children:[(0,t.jsx)("span",{className:`text-sm font-bold ${n?"text-white":r?"text-gray-400":"text-gray-800"}`,children:e}),c>0&&(0,t.jsx)("span",{className:`text-[9px] font-bold leading-none px-1 rounded-full mt-0.5 ${n?"bg-white/30 text-white":""}`,style:n?{}:{color:o?"#f59e0b":ek},children:c})]},a)})}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-4 px-1",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber-400"})," Onay bekliyor"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ek}})," ","OnaylÄ±"]})]})]}),q&&(0,t.jsxs)("div",{className:"mt-4 animate-in",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3 px-1",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900",children:(0,s.formatDayHeader)(q)}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[eH.length," randevu"]})]}),0===eH.length?(0,t.jsx)("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-8 text-center",children:(0,t.jsx)("p",{className:"text-gray-400 font-medium",children:"Bu gÃ¼n randevu yok"})}):(0,t.jsx)("div",{className:"space-y-2",children:eH.map(e=>(0,t.jsx)(R,{appt:e,onUpdate:eP,updatingId:X,primaryColor:ek},e.id))})]}),!q&&(0,t.jsx)("div",{className:"text-center mt-8",children:(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"RandevularÄ± gÃ¶rmek iÃ§in takvimden bir gÃ¼n seÃ§in"})})]}),"customers"===T&&(0,t.jsxs)("div",{className:"animate-in",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4 px-1",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900",children:"MÃ¼ÅŸteri Listesi"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[en.length," kiÅŸi"]})]}),ec?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)(h.Loader2,{className:"w-7 h-7 animate-spin",style:{color:ek}})}):0===en.length?(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-10 text-center",children:[(0,t.jsx)(b,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-400 font-medium",children:"HenÃ¼z mÃ¼ÅŸteri yok"}),(0,t.jsx)("p",{className:"text-gray-300 text-sm mt-1",children:"Ä°lk randevu ile mÃ¼ÅŸteriler otomatik oluÅŸur"})]}):(0,t.jsx)("div",{className:"space-y-2",children:en.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-11 h-11 rounded-2xl flex items-center justify-center text-white font-bold flex-shrink-0",style:{backgroundColor:ek},children:(0,t.jsx)(f,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-bold text-gray-900 text-sm",children:e.name}),(0,t.jsxs)("a",{href:`tel:${e.phone}`,className:"text-gray-500 text-sm flex items-center gap-1 hover:text-gray-700",children:[(0,t.jsx)(u.Phone,{className:"w-3 h-3"}),e.phone]})]}),(0,t.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,t.jsx)("p",{className:"text-lg font-bold",style:{color:ek},children:e.appointmentCount}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"randevu"})]})]},e.id))})]}),"webhooks"===T&&(0,t.jsxs)("div",{className:"animate-in",children:[(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-5 mb-4",children:[(0,t.jsx)("p",{className:"font-bold text-gray-900 mb-3",children:"Yeni Webhook Ekle"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("input",{type:"url",value:ep,onChange:e=>eg(e.target.value),placeholder:"https://example.com/webhook",className:"w-full px-4 py-3 rounded-2xl border border-gray-200 bg-gray-50 text-gray-900 text-sm placeholder-gray-400 focus:outline-none focus:ring-2"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>eb("appointment_created"),className:`flex-1 py-2.5 rounded-xl text-xs font-semibold border transition-all ${"appointment_created"===ey?"text-white border-transparent":"bg-gray-50 text-gray-600 border-gray-200"}`,style:"appointment_created"===ey?{backgroundColor:ek}:{},children:"Randevu OluÅŸturuldu"}),(0,t.jsx)("button",{onClick:()=>eb("appointment_approved"),className:`flex-1 py-2.5 rounded-xl text-xs font-semibold border transition-all ${"appointment_approved"===ey?"text-white border-transparent":"bg-gray-50 text-gray-600 border-gray-200"}`,style:"appointment_approved"===ey?{backgroundColor:ek}:{},children:"Randevu OnaylandÄ±"})]}),(0,t.jsx)("input",{type:"text",value:ej,onChange:e=>ef(e.target.value),placeholder:"Secret key (opsiyonel)",className:"w-full px-4 py-3 rounded-2xl border border-gray-200 bg-gray-50 text-gray-900 text-sm placeholder-gray-400 focus:outline-none focus:ring-2"}),(0,t.jsxs)("button",{onClick:eA,disabled:ev||!ep.trim(),className:"w-full py-3 rounded-2xl font-bold text-white text-sm transition-all active:scale-[0.98] disabled:opacity-50 flex items-center justify-center gap-2",style:{backgroundColor:ek},children:[ev?(0,t.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(N,{className:"w-4 h-4"}),"Ekle"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3 px-1",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900",children:"KayÄ±tlÄ± Webhook'lar"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[ex.length," adet"]})]}),eh?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)(h.Loader2,{className:"w-7 h-7 animate-spin",style:{color:ek}})}):0===ex.length?(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-10 text-center",children:[(0,t.jsx)(v,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-400 font-medium",children:"HenÃ¼z webhook yok"}),(0,t.jsx)("p",{className:"text-gray-300 text-sm mt-1",children:"YukarÄ±dan yeni bir webhook ekleyin"})]}):(0,t.jsx)("div",{className:"space-y-2",children:ex.map(e=>(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${e.isActive?"text-white":"bg-gray-100 text-gray-400"}`,style:e.isActive?{backgroundColor:ek}:{},children:(0,t.jsx)(v,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:`text-sm font-mono break-all ${e.isActive?"text-gray-900":"text-gray-400 line-through"}`,children:e.url}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${"appointment_created"===e.event?"bg-blue-50 text-blue-600":"bg-green-50 text-green-600"}`,children:"appointment_created"===e.event?"OluÅŸturuldu":"OnaylandÄ±"}),e.secret&&(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"ðŸ”‘ Secret"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,t.jsx)("button",{onClick:()=>eT(e.id,!e.isActive),className:"p-2 rounded-xl hover:bg-gray-50 transition-colors",title:e.isActive?"Devre dÄ±ÅŸÄ± bÄ±rak":"AktifleÅŸtir",children:e.isActive?(0,t.jsx)(C,{className:"w-5 h-5",style:{color:ek}}):(0,t.jsx)(k,{className:"w-5 h-5 text-gray-300"})}),(0,t.jsx)("button",{onClick:()=>ez(e.id),className:"p-2 rounded-xl text-red-400 hover:bg-red-50 hover:text-red-500 transition-colors",children:(0,t.jsx)(w,{className:"w-4 h-4"})})]})]})},e.id))}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-2xl p-4 mt-4",children:(0,t.jsxs)("p",{className:"text-gray-500 text-xs leading-relaxed",children:[(0,t.jsx)("strong",{children:"Webhook Payload:"})," Her tetiklemede POST isteÄŸi gÃ¶nderilir.",(0,t.jsx)("br",{}),"Header:"," ",(0,t.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"Content-Type: application/json"}),(0,t.jsx)("br",{}),"Secret varsa:"," ",(0,t.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"X-Webhook-Secret: ***"}),(0,t.jsx)("br",{}),"Body:"," ",(0,t.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:'{"event", "timestamp", "data": {â€¦}}'})]})})]})]}),er&&(0,t.jsx)(z,{business:M,template:n,onClose:()=>ei(!1),onSave:e=>{A(e),eC(I,B)}})]}):(0,t.jsx)(D,{password:p,setPassword:y,error:S,onLogin:()=>{p===M.adminPassword?(sessionStorage.setItem(O,"true"),m(!0),$("")):$("Åžifre hatalÄ±")},business:M,template:n})}function D({password:e,setPassword:a,error:s,onLogin:l,business:r,template:i}){return(0,t.jsx)("div",{className:`min-h-screen bg-gradient-to-br ${i.heroGradient} flex items-center justify-center px-5`,children:(0,t.jsxs)("div",{className:"w-full max-w-xs",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[r.logo?(0,t.jsx)("img",{src:r.logo,alt:r.name,className:"w-20 h-20 rounded-3xl object-cover mx-auto mb-4 shadow-2xl"}):(0,t.jsx)("div",{className:"w-20 h-20 rounded-3xl bg-white/20 backdrop-blur-sm flex items-center justify-center text-4xl mx-auto mb-4 shadow-2xl",children:i.emoji}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:r.name}),(0,t.jsx)("p",{className:"text-white/60 mt-1 text-sm",children:"YÃ¶netim Paneli"})]}),(0,t.jsx)("div",{className:"bg-white rounded-3xl p-6 shadow-2xl",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"password",value:e,onChange:e=>a(e.target.value),placeholder:"Åžifre",className:"w-full px-4 py-4 rounded-2xl border border-gray-200 bg-gray-50 text-gray-900 text-base focus:outline-none focus:ring-2 text-center tracking-widest",onKeyDown:e=>"Enter"===e.key&&l(),autoFocus:!0}),s&&(0,t.jsx)("p",{className:"text-red-500 text-sm text-center",children:s}),(0,t.jsx)("button",{onClick:l,className:"w-full py-4 rounded-2xl font-bold text-white text-base transition-all active:scale-[0.98] shadow-lg",style:{backgroundColor:r.primaryColor},children:"GiriÅŸ Yap"})]})})]})})}function R({appt:e,onUpdate:a,updatingId:s,primaryColor:r}){let i=s===e.id;return(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0 text-white font-bold text-lg shadow-sm",style:{backgroundColor:r},children:e.time.replace(":","")}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("p",{className:"font-bold text-gray-900 text-base",children:e.customerName}),(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full border font-medium ${(0,l.getStatusColor)(e.status)}`,children:(0,l.getStatusLabel)(e.status)})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5 mt-1",children:[(0,t.jsxs)("a",{href:`tel:${e.customerPhone}`,className:"text-sm text-gray-500 flex items-center gap-1 hover:text-gray-700",children:[(0,t.jsx)(u.Phone,{className:"w-3 h-3"}),e.customerPhone]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500 flex items-center gap-1",children:[(0,t.jsx)(p.Clock,{className:"w-3 h-3"}),e.time]}),e.service&&(0,t.jsx)("span",{className:"text-sm text-gray-500",children:e.service.name})]})]}),"pending"===e.status&&(0,t.jsxs)("div",{className:"flex gap-2 flex-shrink-0",children:[(0,t.jsx)("button",{onClick:()=>a(e.id,"approved"),disabled:i,className:"w-11 h-11 rounded-2xl bg-emerald-50 text-emerald-600 hover:bg-emerald-100 flex items-center justify-center transition-all active:scale-95 disabled:opacity-50",children:i?(0,t.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(x,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>a(e.id,"cancelled"),disabled:i,className:"w-11 h-11 rounded-2xl bg-red-50 text-red-500 hover:bg-red-100 flex items-center justify-center transition-all active:scale-95 disabled:opacity-50",children:(0,t.jsx)(m.X,{className:"w-5 h-5"})})]}),"approved"===e.status&&(0,t.jsx)("button",{onClick:()=>a(e.id,"completed"),disabled:i,className:"flex-shrink-0 w-11 h-11 rounded-2xl flex items-center justify-center transition-all active:scale-95 disabled:opacity-50",style:{backgroundColor:`${r}15`,color:r},children:i?(0,t.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(y,{className:"w-5 h-5"})})]})})}function K({notifications:e,onClose:a}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:a}),(0,t.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-72 bg-white rounded-2xl shadow-2xl border border-gray-100 z-50 overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 border-b border-gray-100",children:(0,t.jsx)("p",{className:"font-semibold text-gray-900 text-sm",children:"Bildirimler"})}),(0,t.jsx)("div",{className:"max-h-64 overflow-y-auto",children:0===e.length?(0,t.jsx)("div",{className:"py-6 text-center text-gray-400 text-sm",children:"Bildirim yok"}):e.slice(0,15).map(e=>(0,t.jsxs)("div",{className:`px-4 py-3 border-b border-gray-50 ${!e.isRead?"bg-blue-50/60":""}`,children:[(0,t.jsx)("p",{className:`text-sm ${!e.isRead?"font-semibold text-gray-900":"text-gray-600"}`,children:e.message}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-0.5",children:new Date(e.createdAt).toLocaleString("tr-TR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]},e.id))})]})]})}e.s(["default",()=>H],70262)}]);